async function convertToSticker() {
    const input = document.getElementById('imageInput');
    const resultDiv = document.getElementById('result');
    
    if (!input.files[0]) return alert('Pilih gambar dulu!');

    resultDiv.innerHTML = "Sedang memproses...";

    const formData = new FormData();
    formData.append('image', input.files[0]);

    try {
        const res = await fetch('/api/convert', {
            method: 'POST',
            body: formData
        });

        if (!res.ok) throw new Error('Gagal konversi di server');

        const blob = await res.blob();
        const url = URL.createObjectURL(blob);
        
        resultDiv.innerHTML = `
            <p>âœ… Berhasil! Klik kanan dan simpan gambar atau tahan pada HP:</p>
            <img src="${url}" style="width: 250px; border: 1px solid #ccc; padding: 10px;">
            <br>
            <a href="${url}" download="sticker.webp">
                <button style="margin-top:10px;">Download File .webp</button>
            </a>
        `;
    } catch (err) {
        alert(err.message);
        resultDiv.innerHTML = "Terjadi kesalahan.";
    }
}
